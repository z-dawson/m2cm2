(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538,38,369],{848:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/experience",function(){return s(2322)}])},7038:function(t,e,s){"use strict";s.r(e),s.d(e,{Loop:function(){return u},RandomMetro:function(){return c},Urn:function(){return r},getNumFilenames:function(){return d},msToS:function(){return h},randomFloat:function(){return a},randomInt:function(){return l},randomRange:function(){return i},sToMs:function(){return o}});let i=(t,e)=>(t=Math.ceil(t),Math.floor(Math.random()*((e=Math.floor(e))-t+1)+t)),r=class{next(){(this.discarded.length>this.waiting||0==this.possible.length)&&(this.possible=this.possible.concat(this.discarded.slice(0,this.reuse)),this.discarded.splice(0,this.reuse));let t=Math.floor(Math.random()*this.possible.length),e=this.possible[t];return this.possible.splice(t,1),this.discarded.push(e),e}constructor(t,e,s=1){this.waiting=e,this.reuse=s,this.possible=Array(t-1-0+1).fill(0).map((t,e)=>0+e),this.discarded=[]}},n=t=>1==t.length?[0,t[0]]:t,a=function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];let[i,r]=n(e);return Math.random()*(r-i)+i},l=function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];let[i,r]=n(e);return Math.floor(a(i,r))},c=class{start(t){let{callback:e}=t||{};e&&(this.callback=e);let{interval:s,clear:i}=this.callback(this)||{};this.callbackClear=i;let r="number"==typeof s?s:l(this.min,this.max);return this.count++,this.delay=setTimeout(this.start.bind(this),r),this}stop(){if(this){var t;return clearTimeout(this.delay),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.count=0,this}}setRange(t,e){Object.assign(this,{min:t,max:e})}constructor(t){this.callback=t,this.delay,this.count=0}},o=t=>1e3*t,h=t=>t/1e3,u=class{init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.callback=t;let s={interval:o(1)};return Object.assign(this,s,e),this.count=0,this}start(t,e){let s=()=>{this.callbackClear=this.callback(this),this.count+=1};return this.active&&this.clear(),t&&this.init(t,e),s(),this.loopReference=setInterval(()=>{this.count>=this.times?this.clear():s()},this.interval),this.active=!0,this}clear(){var t;return this.count=0,clearInterval(this.loopReference),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.active=!1,this}stop(){return this.clear()}constructor(t,e){this.init(t,e),this.active=!1}},d=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp3";return Array.from(Array(t)).map((t,i)=>"".concat(i+e,".").concat(s))}},5369:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var i=s(2123),r=s(9634),n=s(7038);let a=(0,n.getNumFilenames)(20);class l{async load(){return this.players=await this.playersPromise,this.players.fadeOut=.02,this.players.fadeIn=.02,this.players.volume.value=-8,this}play(t){let e=(0,n.randomInt)(this.available.length),s=this.available[e];this.indexMapping[t]=s,this.discarded.push(this.available.splice(e,1)[0]),this.players.player(s).start(),this.players.player(s).loop=!0}stop(t){let e=this.indexMapping[t];this.available.push(this.discarded.splice(this.discarded.indexOf(e),1)[0]),this.players.player(e).stop()}restart(t){let e=this.indexMapping[t];this.players.player(e).seek(0)}stopAll(){this.players.stopAll()}constructor(){this.players,this.playersPromise=new Promise(t=>{let e=new i.dQ({urls:a,onload:()=>{t(e)},baseUrl:"".concat(r.O,"/audio/experience/")}).toDestination()}),this.indexMapping={},this.available=Array.from(Array(20)).map((t,e)=>e),this.discarded=[]}}},9634:function(t,e,s){"use strict";s.d(e,{O:function(){return r}});var i=s(3454);let r=i.env.NEXT_PUBLIC_BASE_PATH||""},442:function(t,e,s){"use strict";s.d(e,{$:function(){return r},o:function(){return i}});let i=t=>new Promise(e=>{if(4===t.readyState)e();else{let s=()=>{e(),removeEventListener("loadeddata",s,!0)};t.addEventListener("loadeddata",s,!0)}}),r=t=>{let e=[...t].sort((t,e)=>t-e),s=-1;for(let i=0;i<e.length;++i)if(e[i]!=i){s=i;break}return -1==s&&(s=e[e.length-1]+1),s}},2322:function(t,e,s){"use strict";s.r(e);var i=s(5893),r=s(7038),n=s(442),a=s(5743),l=s(4969),c=s(8371),o=s(7294),h=s(4660);s(9962);var u=s(5369);let d=()=>{let[t,e]=(0,o.useState)([0]),[s,d]=(0,o.useState)(0),p=(0,o.useRef)(!1),f=(0,o.useRef)();(0,o.useEffect)(()=>(f.current=new u.default,f.current.load().then(()=>{p.current=!0,t.forEach(t=>f.current.play(t))}),()=>{console.log(f.current),f.current.stopAll()}),[]);let m=()=>{p.current&&e(t=>{let e=(0,n.$)(t);return f.current.play(e),d(t.length),[...t,e]})},y=s=>i=>{i.stopPropagation(),p.current&&(f.current.stop(t[s]),e(t=>{let e=[...t];return e.splice(s,1),d(t=>s<t||t===e.length?t-1:t),35>(0,r.randomInt)(100)&&setTimeout(()=>{m()},(0,r.sToMs)(.5)),e}))};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(h.mQ,{style:{border:"solid gray 1px",userSelect:"none",margin:"1rem"},selectedIndex:s,onSelect:t=>{d(t)},children:[(0,i.jsxs)(h.td,{children:[t.map((e,s)=>(0,i.jsxs)(h.OK,{onClick:()=>{f.current.restart(e)},children:["Tab ",e+1," ",t.length>1&&(0,i.jsx)(a.Z,{onClick:y(s)})]},e)),t.length<20&&(0,i.jsx)(c.ZP,{icon:(0,i.jsx)(l.Z,{}),type:"text",onClick:m})]}),t.map(t=>(0,i.jsx)(h.x4,{style:{height:"90vh",padding:"1rem"},children:(0,i.jsxs)("h2",{children:["Tab ",t+1]})},t))]})})};e.default=d}},function(t){t.O(0,[123,841,774,888,179],function(){return t(t.s=848)}),_N_E=t.O()}]);