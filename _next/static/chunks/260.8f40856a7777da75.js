"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260,38],{4260:function(t,e,r){let n,i,s,a;r.r(e),r.d(e,{init:function(){return f},start:function(){return v},stop:function(){return g}});var l=r(2123),o=r(7038),c=r(9634);let h=["S0_03 a.mp3","S0_03 b.mp3","S0_03 c.mp3","S0_03 d.mp3","S0_03 e.mp3","S0_03 f.mp3"],u=new Promise(t=>{n=new l.dQ({urls:h,onload:t,baseUrl:"".concat(c.O,"/audio/apartment/")}).toDestination()}),d=new o.Urn(h.length,1),p=new o.Loop,m=!1;n.fadeOut=.3,n.fadeIn=.08;let f=t=>{(a=t.video).current.loop=!0,a.current.addEventListener("seeked",()=>{var t;m||(null==a?void 0:null===(t=a.current)||void 0===t?void 0:t.paused)||b()}),i=new o.RandomMetro(t=>{let{count:e}=t,r=a.current.duration*(0,o.randomFloat)(1),i=e>0,l=t=>{let{count:e}=t;return a.current.currentTime=r,n.player(s).seek(r),console.log("loop",e),()=>{m=!1}};if(i){m=!0;let c={interval:(0,o.randomInt)(200,1500),times:(0,o.randomInt)(2,5)+1};p.start(l,c),console.log("starting loop",e,c)}let{duration:h}=a.current;return{clear:i?p.stop:void 0,interval:(0,o.sToMs)(h*(0,o.randomInt)(.5,2))}})},v=async t=>{await Promise.all([l.BL(),u]),t.current.currentTime=0,t.current.play(),i.start()},b=()=>{let t=d.discarded[d.discarded.length-1];void 0!==t&&n.player(t).stop(),s=d.next(),n.player(s).start(l.zO())},g=t=>{t.current&&(t.current.pause(),t.current.currentTime=0),console.log({playerIndex:s}),"number"==typeof s&&n.player(s).stop(),i.stop()}},7038:function(t,e,r){r.r(e),r.d(e,{Loop:function(){return u},RandomMetro:function(){return o},Urn:function(){return i},getNumFilenames:function(){return d},msToS:function(){return h},randomFloat:function(){return a},randomInt:function(){return l},randomRange:function(){return n},sToMs:function(){return c}});let n=(t,e)=>(t=Math.ceil(t),Math.floor(Math.random()*((e=Math.floor(e))-t+1)+t)),i=class{next(){(this.discarded.length>this.waiting||0==this.possible.length)&&(this.possible=this.possible.concat(this.discarded.slice(0,this.reuse)),this.discarded.splice(0,this.reuse));let t=Math.floor(Math.random()*this.possible.length),e=this.possible[t];return this.possible.splice(t,1),this.discarded.push(e),e}constructor(t,e,r=1){this.waiting=e,this.reuse=r,this.possible=Array(t-1-0+1).fill(0).map((t,e)=>0+e),this.discarded=[]}},s=t=>1==t.length?[0,t[0]]:t,a=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[n,i]=s(e);return Math.random()*(i-n)+n},l=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[n,i]=s(e);return Math.floor(a(n,i))},o=class{start(t){let{callback:e}=t||{};e&&(this.callback=e);let{interval:r,clear:n}=this.callback(this)||{};this.callbackClear=n;let i="number"==typeof r?r:l(this.min,this.max);return this.count++,this.delay=setTimeout(this.start.bind(this),i),this}stop(){if(this){var t;return clearTimeout(this.delay),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.count=0,this}}setRange(t,e){Object.assign(this,{min:t,max:e})}constructor(t){this.callback=t,this.delay,this.count=0}},c=t=>1e3*t,h=t=>t/1e3,u=class{init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.callback=t;let r={interval:c(1)};return Object.assign(this,r,e),this.count=0,this}start(t,e){let r=()=>{this.callbackClear=this.callback(this),this.count+=1};return this.active&&this.clear(),t&&this.init(t,e),r(),this.loopReference=setInterval(()=>{this.count>=this.times?this.clear():r()},this.interval),this.active=!0,this}clear(){var t;return this.count=0,clearInterval(this.loopReference),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.active=!1,this}stop(){return this.clear()}constructor(t,e){this.init(t,e),this.active=!1}},d=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp3";return Array.from(Array(t)).map((t,n)=>"".concat(n+e,".").concat(r))}}}]);