"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219,124],{5219:function(t,e,n){let r,i,s,o;n.r(e),n.d(e,{init:function(){return p},start:function(){return b},stop:function(){return v}});var a=n(2123),u=n(6124),l=n(7038);let c=["/audio/sonyEricsson/5thSentence.mp3","/audio/sonyEricsson/4thSentence.mp3","/audio/sonyEricsson/3rdSentence.mp3","/audio/sonyEricsson/2ndSentence.mp3","/audio/sonyEricsson/1stSentence.mp3","/audio/sonyEricsson/S0_05 - Sony Ericsson.mp3"],h="ended",d=new Promise(t=>{s=new a.dQ({urls:c,onload:t}).toDestination()}),p=t=>{(r=t.video).current.loop=!1,o=()=>{t.onFinish()},r.current.addEventListener(h,o,!0)},y=new l.Urn(c.length,c.length-2),f=new u.default([{value:0,probability:.7,name:"zero"},{value:1,probability:.3,followedBy:["zero"]}]),m=new l.RandomMetro(()=>{let t;t=0==f.next()?y.next():5;let e=s.player(t).buffer.duration;return s.player(t).start(),i=e,{interval:(0,l.sToMs)(i),clear:()=>{s.player(t).stop()}}}),b=async t=>{await Promise.all([a.BL(),d]),i=s.player(0).buffer.duration,console.log("Timing"+s.player(2).buffer.duration),m.start({nextInterval:()=>(0,l.sToMs)(i)}),t.current.currentTime=0,t.current.play()},v=t=>{a.J7.stop(),m.stop(),removeEventListener(h,o,!0),t.current&&(t.current.currentTime=0,t.current.pause())}},6124:function(t,e,n){n.r(e),n.d(e,{weightedRandom:function(){return i}});var r=n(7038);let i=t=>{let e;let n=[...t];for(e=1;e<n.length;e++)n[e]+=n[e-1];let r=Math.random()*n[n.length-1];for(e=0;e<n.length&&!(n[e]>r);e++);return e},s=t=>{let{restProbability:e,followedBy:n}=t;return"number"==typeof t||"string"==typeof t?{value:t,type:"value"}:{...t,type:["value","range"].find(e=>void 0!==t[e]),restProbability:e>1?e/100:e,followedBy:n?u(n):void 0}},o=t=>Object.entries(t).map(t=>{let[e,n]=t;return{...s(n),name:e}}),a=t=>t.map((t,e,n)=>{let{length:r}=n;return{name:e,probability:1/r,...s(t)}}),u=t=>(Array.isArray(t)?a:o)(t),l=t=>t.reduce((t,e,n)=>(t[e.name]={...e,index:n},t),{}),c=t=>t.map(t=>t.probability);e.default=class{initCounter(){let{repeat:t}=this.instructions[this.current];this.count=0,this.max=Array.isArray(t)?(0,r.randomInt)(...t):t||0,this.finished=!1}next(){var t;let e=(null===(t=this.instructions)||void 0===t?void 0:t[this.current])||{};if(e.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(e.followedBy&&(e.repeat&&this.finished||!e.repeat)){let{value:n}=e.followedBy[i(c(e.followedBy))];this.current="number"==typeof n?n:this.byName[n].index,this.initCounter()}else this.current=i(this.probabilities),this.initCounter();let s=this.instructions[this.current],{type:o,restProbability:a}=s,u=a&&!i([a,1-a]),l=u?null:"range"==o?(0,r.randomInt)(...s[o]):"value"==o?s[o]:null;return l}constructor(t){this.instructions=u(t),this.probabilities=c(this.instructions),this.byName=l(this.instructions),this.count=this.max=0,this.finished=!1}}}}]);