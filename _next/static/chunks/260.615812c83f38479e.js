"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{4260:function(e,t,r){let n,o,a,l;r.r(t),r.d(t,{init:function(){return T},start:function(){return b},stop:function(){return y}});var u=r(7038),s=r(2123),i=r(9634),c=r(1343);let d=!1,m=["S0_03 a.mp3","S0_03 b.mp3","S0_03 c.mp3","S0_03 d.mp3","S0_03 e.mp3","S0_03 f.mp3"],p=new Promise(e=>{n=new s.dQ({urls:m,onload:e,baseUrl:"".concat(i.O,"/audio/apartment/")}).toDestination()}),v=new u.Urn(m.length,1),f=new u.Loop,w=!1,T=e=>{(l=e.video).current.loop=!0,l.current.addEventListener("seeked",()=>{var e;w||(null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.paused)||_()}),o=new u.RandomMetro(e=>{let{count:t}=e,r=l.current.duration*(0,u.randomFloat)(1),o=t>0,s=e=>{let{count:t}=e;return l.current.currentTime=r,n.player(a).seek(r),console.log("loop",t),()=>{w=!1}};if(o){w=!0;let i={interval:(0,u.randomInt)(200,1500),times:(0,u.randomInt)(2,5)+1};f.start(s,i),console.log("starting loop",t,i)}let{duration:c}=l.current;return{clear:o?()=>{f.stop()}:void 0,interval:(0,u.sToMs)(c*(0,u.randomFloat)(.5,2))}})},b=async e=>{d=!0,await Promise.all([s.BL(),p]),d&&(console.log("start apartment"),n.volume.rampTo(0,.05),e.current.currentTime=0,e.current.play(),n.fadeOut=.3,n.fadeIn=.08,o.start())},_=()=>{let e=v.discarded[v.discarded.length-1];void 0!==e&&n.player(e).stop(),a=v.next(),n.player(a).start(s.zO())},y=async e=>{d=!1,e.current&&(e.current.pause(),e.current.currentTime=0),console.log({playerIndex:a}),n.volume.rampTo(-80,i.c),o.stop(),await (0,c.ZP)((0,u.sToMs)(i.c)),"number"==typeof a&&n.player(a).stop()}},1343:function(e,t,r){let n=()=>{let e=Error("Delay aborted");return e.name="AbortError",e},o=new WeakMap,a=function({clearTimeout:e,setTimeout:t}={}){return(r,{value:a,signal:l}={})=>{let u,s,i;if(l?.aborted)return Promise.reject(n());let c=e??clearTimeout,d=()=>{c(u),i(n())},m=()=>{l&&l.removeEventListener("abort",d)},p=new Promise((e,n)=>{s=()=>{m(),e(a)},i=n,u=(t??setTimeout)(s,r)});return l&&l.addEventListener("abort",d,{once:!0}),o.set(p,()=>{c(u),u=null,s()}),p}}();t.ZP=a}}]);