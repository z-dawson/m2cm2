"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[828,124],{6124:function(t,e,r){r.r(e),r.d(e,{weightedRandom:function(){return i}});var n=r(7038);let i=t=>{let e;let r=[...t];for(e=1;e<r.length;e++)r[e]+=r[e-1];let n=Math.random()*r[r.length-1];for(e=0;e<r.length&&!(r[e]>n);e++);return e},o=t=>{let{restProbability:e,followedBy:r}=t;return"number"==typeof t||"string"==typeof t?{value:t,type:"value"}:{...t,type:["value","range"].find(e=>void 0!==t[e]),restProbability:e>1?e/100:e,followedBy:r?s(r):void 0}},l=t=>Object.entries(t).map(t=>{let[e,r]=t;return{...o(r),name:e}}),a=t=>t.map((t,e,r)=>{let{length:n}=r;return{name:e,probability:1/n,...o(t)}}),s=t=>(Array.isArray(t)?a:l)(t),u=t=>t.reduce((t,e,r)=>(t[e.name]={...e,index:r},t),{}),c=t=>t.map(t=>t.probability);e.default=class{initCounter(){let{repeat:t}=this.instructions[this.current];this.count=0,this.max=Array.isArray(t)?(0,n.randomInt)(...t):t||0,this.finished=!1}next(){var t;let e=(null===(t=this.instructions)||void 0===t?void 0:t[this.current])||{};if(e.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(e.followedBy&&(e.repeat&&this.finished||!e.repeat)){let{value:r}=e.followedBy[i(c(e.followedBy))];this.current="number"==typeof r?r:this.byName[r].index,this.initCounter()}else this.current=i(this.probabilities),this.initCounter();let o=this.instructions[this.current],{type:l,restProbability:a}=o,s=a&&!i([a,1-a]),u=s?null:"range"==l?(0,n.randomInt)(...o[l]):"value"==l?o[l]:null;return u}constructor(t){this.instructions=s(t),this.probabilities=c(this.instructions),this.byName=u(this.instructions),this.count=this.max=0,this.finished=!1}}},1828:function(t,e,r){let n;r.r(e),r.d(e,{init:function(){return d},start:function(){return f},stop:function(){return y}});var i=r(2123),o=r(6124),l=r(7038),a=r(9634);let s=["travel5.mp3","travel4.mp3","travel3.mp3","travel2.mp3","travel1.mp3","waiting.mp3"],u=new Promise(t=>{n=new i.dQ({urls:s,onload:t,baseUrl:"".concat(a.O,"/audio/travel/")}).toDestination()}),c=new o.default([{range:[0,4],probability:1,name:"drone",followedBy:["text"]},{value:5,name:"text",probability:0,followedBy:["drone"]}]),h=new o.default([{range:[-5,3],probability:1,name:"drone",followedBy:["text"]},{range:[-3,2],name:"text",probability:0,followedBy:["drone"]}]),d=t=>{t.video.current.loop=!0},p=new l.RandomMetro(()=>{let t=c.next(),e=h.next();console.log(e);let r=n.player(t),i=r.buffer.duration;return console.log("playerduration "+i),r.start(),{interval:(0,l.sToMs)(Math.ceil(i)+e)}}),f=async t=>{await Promise.all([i.BL(),u]),n.player(5).volume.value=-13,i.J7.start(),p.start(),t.current.currentTime=0,t.current.play()},y=t=>{t.current&&(t.current.pause(),t.current.currentTime=0),p.stop(),i.J7.stop(),n.stopAll()}}}]);