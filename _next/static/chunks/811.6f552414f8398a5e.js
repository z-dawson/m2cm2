"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811,124],{5811:function(e,t,n){let r,i,l,o;n.r(t),n.d(t,{init:function(){return f},start:function(){return A},stop:function(){return N}});var a=n(6124),u=n(2123),s=n(9634),c=n(7038);let d=(0,c.getNumFilenames)(60),v=(0,c.getNumFilenames)(26),p=new Promise(e=>{r=new u.dQ({urls:d,onload:e,baseUrl:"".concat(s.O,"/audio/concert/piano1/")}).toDestination()}),h=new Promise(e=>{i=new u.dQ({urls:v,onload:e,baseUrl:"".concat(s.O,"/audio/concert/piano2/")}).toDestination()}),f=e=>{(l=e.video).current.loop=!0,(o=e.video2).current.loop=!0};r.fadeOut=.02,r.fadeIn=.02,i.fadeOut=.02,i.fadeIn=.02;let m=new a.default([{range:[0,59]}]),b=new a.default([{range:[0,25]}]),y=new a.default([{value:1,followedBy:["bank2"],name:"bank1",probability:1},{value:2,followedBy:["bank1"],name:"bank2",probability:0}]),w=new a.default([{value:.3,repeat:10},{value:3},{value:15},{value:4},{value:2},{value:.8}]),g=new a.default([{range:[0,7]}]),x=new u.rN(()=>{console.log("loop1");let e=m.next(),t=r.player(e);t.start(u.zO()),x.interval=t.buffer.duration,console.log("volumeAudio1 "+r.volume.value)}),T=new u.rN(()=>{console.log("loop2");let e=b.next(),t=i.player(e);t.start(u.zO()),T.interval=t.buffer.duration,console.log("volumeAudio2 "+i.volume.value)}),k=new c.RandomMetro(()=>{if(console.log("timeSelector"),1!=y.next())return console.log(g),o.current.play(),o.current.style.visibility="visible",l.current.style.visibility="hidden",r.volume.rampTo(-80,.05),i.volume.rampTo(0,.05),{interval:(0,c.sToMs)(w.next())};{let e=(0,c.sToMs)(g.next());return l.current.currentTime=e,console.log(e),r.volume.rampTo(0,.05),i.volume.rampTo(-80,.05),l.current.style.visibility="visible",o.current.style.visibility="hidden",{interval:(0,c.sToMs)(w.next())}}}),A=async e=>{await Promise.all([u.BL(),p,h]),u.J7.start(),e.current.currentTime=0,e.current.play(),o.current.currentTime=0,o.current.play(),x.start(),T.start(),k.start()},N=()=>{var e,t,n,a;k.stop(),x.stop(),T.stop(),r.stopAll(),i.stopAll(),null==l||null===(e=l.current)||void 0===e||null===(t=e.pause)||void 0===t||t.call(e),null==o||null===(n=o.current)||void 0===n||null===(a=n.pause)||void 0===a||a.call(n),[o].forEach(e=>{e.current&&(e.current.pause(),e.current.currentTime=0)})}},6124:function(e,t,n){n.r(t),n.d(t,{weightedRandom:function(){return i}});var r=n(7038);let i=e=>{let t;let n=[...e];for(t=1;t<n.length;t++)n[t]+=n[t-1];let r=Math.random()*n[n.length-1];for(t=0;t<n.length&&!(n[t]>r);t++);return t},l=e=>{let{restProbability:t,followedBy:n}=e;return"number"==typeof e||"string"==typeof e?{value:e,type:"value"}:{...e,type:["value","range"].find(t=>void 0!==e[t]),restProbability:t>1?t/100:t,followedBy:n?u(n):void 0}},o=e=>Object.entries(e).map(e=>{let[t,n]=e;return{...l(n),name:t}}),a=e=>e.map((e,t,n)=>{let{length:r}=n;return{name:t,probability:1/r,...l(e)}}),u=e=>(Array.isArray(e)?a:o)(e),s=e=>e.reduce((e,t,n)=>(e[t.name]={...t,index:n},e),{}),c=e=>e.map(e=>e.probability);t.default=class{initCounter(){let{repeat:e}=this.instructions[this.current];this.count=0,this.max=Array.isArray(e)?(0,r.randomInt)(...e):e||0,this.finished=!1}next(){var e;let t=(null===(e=this.instructions)||void 0===e?void 0:e[this.current])||{};if(t.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(t.followedBy&&(t.repeat&&this.finished||!t.repeat)){let{value:n}=t.followedBy[i(c(t.followedBy))];this.current="number"==typeof n?n:this.byName[n].index,this.initCounter()}else this.current=i(this.probabilities),this.initCounter();let l=this.instructions[this.current],{type:o,restProbability:a}=l,u=a&&!i([a,1-a]),s=u?null:"range"==o?(0,r.randomInt)(...l[o]):"value"==o?l[o]:null;return s}constructor(e){this.instructions=u(e),this.probabilities=c(this.instructions),this.byName=s(this.instructions),this.count=this.max=0,this.finished=!1}}}}]);