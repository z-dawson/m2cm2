"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302,124],{1302:function(t,e,r){let n,i;r.r(e),r.d(e,{init:function(){return h},start:function(){return w},stop:function(){return g}});var a=r(2123),l=r(6124),s=r(7038),o=r(9634);let u=["empty.mp3",...(0,s.getNumFilenames)(56)],c=new Promise(t=>{n=new a.dQ({urls:u,onload:t,baseUrl:"".concat(o.O,"/audio/Sleep/")}).toDestination()});n.fadeOut=.02,n.fadeIn=.02;let h=t=>{(i=t.video).current.loop=!0},p=new l.default([{value:1,probability:.5,name:"normalShuffle"},{value:2,probability:.25,repeat:[3,15],name:"glitchedShuffle"},{value:null,probability:.25,name:"rest"}]),f=new l.default([{range:[1,56]}]),d=new l.default([{range:[80,190]}]),y=new l.default([{range:[1.5,4.5]}]),b=1,m=new s.RandomMetro(()=>{let t;let e=p.next(),r=(0,s.msToS)(d.next());n.player(b).stop(),b=f.next();let l=n.player(b);l.start(a.zO());let o=l.buffer.duration;switch(console.log({shuffleState:e}),e){case null:t=o+y.next();break;case 1:t=o;break;case 2:i.current.currentTime=1,t=r,console.log("glitch")}return{interval:(0,s.sToMs)(t)}}),v=new a.rN(t=>{n.player(0).start(t),v.interval=120,n.player(0).stop(t+n.player(0).buffer.duration)}),w=async t=>{await Promise.all([a.BL(),c]),n.player(0).volume.value=-13,a.J7.start(),m.start(),v.start(60),t.current.currentTime=0,t.current.play()},g=t=>{t.current&&(t.current.pause(),t.current.currentTime=0),m.stop(),v.stop(),n.player(b).stop(),n.player(0).stop(),a.J7.stop()}},6124:function(t,e,r){r.r(e),r.d(e,{weightedRandom:function(){return i}});var n=r(7038);let i=t=>{let e;let r=[...t];for(e=1;e<r.length;e++)r[e]+=r[e-1];let n=Math.random()*r[r.length-1];for(e=0;e<r.length&&!(r[e]>n);e++);return e},a=t=>{let{restProbability:e,followedBy:r}=t;return"number"==typeof t||"string"==typeof t?{value:t,type:"value"}:{...t,type:["value","range"].find(e=>void 0!==t[e]),restProbability:e>1?e/100:e,followedBy:r?o(r):void 0}},l=t=>Object.entries(t).map(t=>{let[e,r]=t;return{...a(r),name:e}}),s=t=>t.map((t,e,r)=>{let{length:n}=r;return{name:e,probability:1/n,...a(t)}}),o=t=>(Array.isArray(t)?s:l)(t),u=t=>t.reduce((t,e,r)=>(t[e.name]={...e,index:r},t),{}),c=t=>t.map(t=>t.probability);e.default=class{initCounter(){let{repeat:t}=this.instructions[this.current];this.count=0,this.max=Array.isArray(t)?(0,n.randomInt)(...t):t||0,this.finished=!1}next(){var t;let e=(null===(t=this.instructions)||void 0===t?void 0:t[this.current])||{};if(e.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(e.followedBy&&(e.repeat&&this.finished||!e.repeat)){let{value:r}=e.followedBy[i(c(e.followedBy))];this.current="number"==typeof r?r:this.byName[r].index,this.initCounter()}else this.current=i(this.probabilities),this.initCounter();let a=this.instructions[this.current],{type:l,restProbability:s}=a,o=s&&!i([s,1-s]),u=o?null:"range"==l?(0,n.randomInt)(...a[l]):"value"==l?a[l]:null;return u}constructor(t){this.instructions=o(t),this.probabilities=c(this.instructions),this.byName=u(this.instructions),this.count=this.max=0,this.finished=!1}}}}]);