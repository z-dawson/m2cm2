"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[369,38],{7038:function(t,i,s){s.r(i),s.d(i,{Loop:function(){return u},RandomMetro:function(){return h},Urn:function(){return a},getNumFilenames:function(){return d},msToS:function(){return c},randomFloat:function(){return l},randomInt:function(){return n},randomRange:function(){return e},sToMs:function(){return o}});let e=(t,i)=>(t=Math.ceil(t),Math.floor(Math.random()*((i=Math.floor(i))-t+1)+t)),a=class{next(){(this.discarded.length>this.waiting||0==this.possible.length)&&(this.possible=this.possible.concat(this.discarded.slice(0,this.reuse)),this.discarded.splice(0,this.reuse));let t=Math.floor(Math.random()*this.possible.length),i=this.possible[t];return this.possible.splice(t,1),this.discarded.push(i),i}constructor(t,i,s=1){this.waiting=i,this.reuse=s,this.possible=Array(t-1-0+1).fill(0).map((t,i)=>0+i),this.discarded=[]}},r=t=>1==t.length?[0,t[0]-1]:t,l=function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];let[e,a]=r(i);return Math.random()*(a-e)+e},n=function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];let[e,a]=r(i);return Math.floor(l(e,a))},h=class{start(t){let{callback:i}=t||{};i&&(this.callback=i);let{interval:s,clear:e}=this.callback(this)||{};this.callbackClear=e;let a="number"==typeof s?s:n(this.min,this.max);return this.count++,this.delay=setTimeout(this.start.bind(this),a),this}stop(){if(this){var t;return clearTimeout(this.delay),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.count=0,this}}setRange(t,i){Object.assign(this,{min:t,max:i})}constructor(t){this.callback=t,this.delay,this.count=0}},o=t=>1e3*t,c=t=>t/1e3,u=class{init(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.callback=t;let s={interval:o(1)};return Object.assign(this,s,i),this.count=0,this}start(t,i){let s=()=>{this.callbackClear=this.callback(this),this.count+=1};return this.active&&this.clear(),t&&this.init(t,i),s(),this.loopReference=setInterval(()=>{this.count>=this.times?this.clear():s()},this.interval),this.active=!0,this}clear(){var t;return this.count=0,clearInterval(this.loopReference),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.active=!1,this}stop(){return this.clear()}constructor(t,i){this.init(t,i),this.active=!1}},d=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp3";return Array.from(Array(t)).map((t,e)=>"".concat(e+i,".").concat(s))}},5369:function(t,i,s){s.r(i),s.d(i,{default:function(){return n}});var e=s(2123),a=s(9634),r=s(7038);let l=(0,r.getNumFilenames)(20);class n{async load(){return this.players=await this.playersPromise,this.players.fadeOut=.02,this.players.fadeIn=.02,this.players.volume.value=-8,this}play(t){let i=(0,r.randomInt)(this.available.length),s=this.available[i];return this.indexMapping[t]=s,this.discarded.push(this.available.splice(i,1)[0]),this.players.player(s).start(),this.players.player(s).loop=!0,i}stop(t){let i=this.indexMapping[t];this.available.push(this.discarded.splice(this.discarded.indexOf(i),1)[0]),this.players.player(i).stop()}restart(t){let i=this.indexMapping[t];this.players.player(i).seek(0)}stopAll(){this.players.stopAll()}constructor(){this.players,this.playersPromise=new Promise(t=>{let i=new e.dQ({urls:l,onload:()=>{t(i)},baseUrl:"".concat(a.O,"/audio/experience/")}).toDestination()}),this.indexMapping={},this.available=Array.from(Array(20)).map((t,i)=>i),this.discarded=[]}}}}]);