"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302,124],{1302:function(e,t,r){let n,i;r.r(t),r.d(t,{init:function(){return f},start:function(){return T},stop:function(){return x}});var a=r(2123),l=r(6124),o=r(7038),s=r(9634),u=r(1343);let c=!1,h=["empty.mp3",...(0,o.getNumFilenames)(56)],p=new Promise(e=>{n=new a.dQ({urls:h,onload:e,baseUrl:"".concat(s.O,"/audio/Sleep/")}).toDestination()});n.fadeOut=.02,n.fadeIn=.02;let f=e=>{(i=e.video).current.loop=!0},m=new l.default([{value:1,probability:.5,name:"normalShuffle"},{value:2,probability:.25,repeat:[3,15],name:"glitchedShuffle"},{value:null,probability:.25,name:"rest"}]),d=new l.default([{range:[1,56]}]),b=new l.default([{range:[80,190]}]),y=new l.default([{range:[1.5,4.5]}]),v=1,w=new o.RandomMetro(()=>{let e;let t=m.next(),r=(0,o.msToS)(b.next());n.player(v).stop(),v=d.next();let l=n.player(v);l.start(a.zO());let s=l.buffer.duration;switch(console.log({shuffleState:t}),t){case null:e=s+y.next();break;case 1:e=s;break;case 2:i.current.currentTime=1,e=r,console.log("glitch")}return{interval:(0,o.sToMs)(e)}}),g=new a.rN(e=>{n.player(0).start(e),g.interval=120,n.player(0).stop(e+n.player(0).buffer.duration)}),T=async e=>{c=!0,await Promise.all([a.BL(),p]),c&&(n.volume.value=0,n.player(0).volume.value=-13,a.J7.start(),w.start(),g.start(60),e.current.currentTime=0,e.current.play())},x=async e=>{c=!1,e.current&&(e.current.pause(),e.current.currentTime=0),n.volume.rampTo(-80,s.c),w.stop(),g.stop(),await (0,u.ZP)((0,o.sToMs)(s.c)),n.player(v).stop(),n.player(0).stop(),a.J7.stop()}},6124:function(e,t,r){r.r(t),r.d(t,{weightedRandom:function(){return i}});var n=r(7038);let i=e=>{let t;let r=[...e];for(t=1;t<r.length;t++)r[t]+=r[t-1];let n=Math.random()*r[r.length-1];for(t=0;t<r.length&&!(r[t]>n);t++);return t},a=e=>{let{restProbability:t,followedBy:r}=e;return"number"==typeof e||"string"==typeof e?{value:e,type:"value"}:{...e,type:["value","range"].find(t=>void 0!==e[t]),restProbability:t>1?t/100:t,followedBy:r?s(r):void 0}},l=e=>Object.entries(e).map(e=>{let[t,r]=e;return{...a(r),name:t}}),o=e=>e.map((e,t,r)=>{let{length:n}=r;return{name:t,probability:1/n,...a(e)}}),s=e=>(Array.isArray(e)?o:l)(e),u=e=>e.reduce((e,t,r)=>(e[t.name]={...t,index:r},e),{}),c=e=>e.map(e=>e.probability);t.default=class{initCounter(){let{repeat:e}=this.instructions[this.current];this.count=0,this.max=Array.isArray(e)?(0,n.randomInt)(...e):e||0,this.finished=!1}next(){var e;let t=(null===(e=this.instructions)||void 0===e?void 0:e[this.current])||{};if(t.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(t.followedBy&&(t.repeat&&this.finished||!t.repeat)){let{value:r}=t.followedBy[i(c(t.followedBy))];this.current="number"==typeof r?r:this.byName[r].index,this.initCounter()}else this.current=i(this.probabilities),this.initCounter();let a=this.instructions[this.current],{type:l,restProbability:o}=a,s=o&&!i([o,1-o]),u=s?null:"range"==l?(0,n.randomInt)(...a[l]):"value"==l?a[l]:null;return u}constructor(e){this.instructions=s(e),this.probabilities=c(this.instructions),this.byName=u(this.instructions),this.count=this.max=0,this.finished=!1}}},1343:function(e,t,r){let n=()=>{let e=Error("Delay aborted");return e.name="AbortError",e},i=new WeakMap,a=function({clearTimeout:e,setTimeout:t}={}){return(r,{value:a,signal:l}={})=>{let o,s,u;if(l?.aborted)return Promise.reject(n());let c=e??clearTimeout,h=()=>{c(o),u(n())},p=()=>{l&&l.removeEventListener("abort",h)},f=new Promise((e,n)=>{s=()=>{p(),e(a)},u=n,o=(t??setTimeout)(s,r)});return l&&l.addEventListener("abort",h,{once:!0}),i.set(f,()=>{c(o),o=null,s()}),f}}();t.ZP=a}}]);