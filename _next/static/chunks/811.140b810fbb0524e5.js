"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811,38,124],{7038:function(t,e,i){i.r(e),i.d(e,{Loop:function(){return h},RandomMetro:function(){return a},Urn:function(){return r},getNumFilenames:function(){return d},msToS:function(){return c},randomFloat:function(){return s},randomInt:function(){return o},randomRange:function(){return n},sToMs:function(){return u}});let n=(t,e)=>(t=Math.ceil(t),Math.floor(Math.random()*((e=Math.floor(e))-t+1)+t)),r=class{next(){(this.discarded.length>this.waiting||0==this.possible.length)&&(this.possible=this.possible.concat(this.discarded.slice(0,this.reuse)),this.discarded.splice(0,this.reuse));let t=Math.floor(Math.random()*this.possible.length),e=this.possible[t];return this.possible.splice(t,1),this.discarded.push(e),e}constructor(t,e,i=1){this.waiting=e,this.reuse=i,this.possible=Array(t-1-0+1).fill(0).map((t,e)=>0+e),this.discarded=[]}},l=t=>1==t.length?[0,t[0]]:t,s=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,r]=l(e);return Math.random()*(r-n)+n},o=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,r]=l(e);return Math.floor(s(n,r))},a=class{start(t){let{callback:e}=t||{};e&&(this.callback=e);let{interval:i,clear:n}=this.callback(this)||{};this.callbackClear=n;let r="number"==typeof i?i:o(this.min,this.max);return this.count++,this.delay=setTimeout(this.start.bind(this),r),this}stop(){if(this){var t;return clearTimeout(this.delay),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.count=0,this}}setRange(t,e){Object.assign(this,{min:t,max:e})}constructor(t){this.callback=t,this.delay,this.count=0}},u=t=>1e3*t,c=t=>t/1e3,h=class{init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.callback=t;let i={interval:u(1)};return Object.assign(this,i,e),this.count=0,this}start(t,e){let i=()=>{this.callbackClear=this.callback(this),this.count+=1};return this.active&&this.clear(),t&&this.init(t,e),i(),this.loopReference=setInterval(()=>{this.count>=this.times?this.clear():i()},this.interval),this.active=!0,this}clear(){var t;return this.count=0,clearInterval(this.loopReference),null===this||void 0===this||null===(t=this.callbackClear)||void 0===t||t.call(this),this.active=!1,this}stop(){return this.clear()}constructor(t,e){this.init(t,e),this.active=!1}},d=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp3";return Array.from(Array(t)).map((t,n)=>"".concat(n+e,".").concat(i))}},5811:function(t,e,i){let n,r,l,s;i.r(e),i.d(e,{init:function(){return p},start:function(){return x},stop:function(){return A}});var o=i(2123),a=i(6124),u=i(7038),c=i(9634);let h=(0,u.getNumFilenames)(60),d=(0,u.getNumFilenames)(26),f=new Promise(t=>{n=new o.dQ({urls:h,onload:t,baseUrl:"".concat(c.O,"/audio/concert/piano1/")}).toDestination()}),v=new Promise(t=>{r=new o.dQ({urls:d,onload:t,baseUrl:"".concat(c.O,"/audio/concert/piano2/")}).toDestination()}),p=t=>{(l=t.video).current.loop=!0,(s=t.video2).current.loop=!0};n.fadeOut=.02,n.fadeIn=.02,r.fadeOut=.02,r.fadeIn=.02;let m=new a.default([{range:[0,59]}]),b=new a.default([{range:[0,25]}]),y=new a.default([{value:1,followedBy:["bank2"],name:"bank1",probability:1},{value:2,followedBy:["bank1"],name:"bank2",probability:0}]),g=new a.default([{value:.3,repeat:10},{value:3},{value:15},{value:4},{value:2},{value:.8}]),w=new a.default([{range:[0,7]}]),k=new o.rN(()=>{console.log("loop1");let t=m.next(),e=n.player(t);e.start(o.zO()),k.interval=e.buffer.duration,console.log("volumeAudio1 "+n.volume.value)}),M=new o.rN(()=>{console.log("loop2");let t=b.next(),e=r.player(t);e.start(o.zO()),M.interval=e.buffer.duration,console.log("volumeAudio2 "+r.volume.value)}),T=new u.RandomMetro(()=>{if(console.log("timeSelector"),1!=y.next())return console.log(w),s.current.play(),s.current.style.visibility="visible",l.current.style.visibility="hidden",n.volume.rampTo(-80,.05),r.volume.rampTo(0,.05),{interval:(0,u.sToMs)(g.next())};{let t=(0,u.sToMs)(w.next());return l.current.currentTime=t,console.log(t),n.volume.rampTo(0,.05),r.volume.rampTo(-80,.05),l.current.style.visibility="visible",s.current.style.visibility="hidden",{interval:(0,u.sToMs)(g.next())}}}),x=async t=>{await Promise.all([o.BL(),f,v]),o.J7.start(),t.current.currentTime=0,t.current.play(),s.current.currentTime=0,s.current.play(),k.start(),M.start(),T.start()},A=()=>{var t,e,i,o;T.stop(),k.stop(),M.stop(),n.stopAll(),r.stopAll(),null==l||null===(t=l.current)||void 0===t||null===(e=t.pause)||void 0===e||e.call(t),null==s||null===(i=s.current)||void 0===i||null===(o=i.pause)||void 0===o||o.call(i),[s].forEach(t=>{t.current&&(t.current.pause(),t.current.currentTime=0)})}},6124:function(t,e,i){i.r(e),i.d(e,{weightedRandom:function(){return r}});var n=i(7038);let r=t=>{let e;let i=[...t];for(e=1;e<i.length;e++)i[e]+=i[e-1];let n=Math.random()*i[i.length-1];for(e=0;e<i.length&&!(i[e]>n);e++);return e},l=t=>{let{restProbability:e,followedBy:i}=t;return"number"==typeof t||"string"==typeof t?{value:t,type:"value"}:{...t,type:["value","range"].find(e=>void 0!==t[e]),restProbability:e>1?e/100:e,followedBy:i?a(i):void 0}},s=t=>Object.entries(t).map(t=>{let[e,i]=t;return{...l(i),name:e}}),o=t=>t.map((t,e,i)=>{let{length:n}=i;return{name:e,probability:1/n,...l(t)}}),a=t=>(Array.isArray(t)?o:s)(t),u=t=>t.reduce((t,e,i)=>(t[e.name]={...e,index:i},t),{}),c=t=>t.map(t=>t.probability);e.default=class{initCounter(){let{repeat:t}=this.instructions[this.current];this.count=0,this.max=Array.isArray(t)?(0,n.randomInt)(...t):t||0,this.finished=!1}next(){var t;let e=(null===(t=this.instructions)||void 0===t?void 0:t[this.current])||{};if(e.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(e.followedBy&&(e.repeat&&this.finished||!e.repeat)){let{value:i}=e.followedBy[r(c(e.followedBy))];this.current="number"==typeof i?i:this.byName[i].index,this.initCounter()}else this.current=r(this.probabilities),this.initCounter();let l=this.instructions[this.current],{type:s,restProbability:o}=l,a=o&&!r([o,1-o]),u=a?null:"range"==s?(0,n.randomInt)(...l[s]):"value"==s?l[s]:null;return u}constructor(t){this.instructions=a(t),this.probabilities=c(this.instructions),this.byName=u(this.instructions),this.count=this.max=0,this.finished=!1}}}}]);