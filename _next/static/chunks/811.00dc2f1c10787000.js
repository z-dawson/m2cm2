"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811,124],{5811:function(e,t,r){let n,i,o,l;r.r(t),r.d(t,{init:function(){return b},start:function(){return A},stop:function(){return N}});var a=r(6124),u=r(2123),s=r(9634),c=r(7038),d=r(1343);let m=(0,c.getNumFilenames)(60),v=(0,c.getNumFilenames)(26),p=new Promise(e=>{n=new u.dQ({urls:m,onload:e,baseUrl:"".concat(s.O,"/audio/concert/piano1/")}).toDestination()}),f=new Promise(e=>{i=new u.dQ({urls:v,onload:e,baseUrl:"".concat(s.O,"/audio/concert/piano2/")}).toDestination()}),b=e=>{(o=e.video).current.loop=!0,(l=e.video2).current.loop=!0};n.fadeOut=.02,n.fadeIn=.02,i.fadeOut=.02,i.fadeIn=.02;let h=new a.default([{range:[0,59]}]),y=new a.default([{range:[0,25]}]),w=new a.default([{value:1,followedBy:["bank2"],name:"bank1",probability:1},{value:2,followedBy:["bank1"],name:"bank2",probability:0}]),T=new a.default([{value:.3,repeat:10},{value:3},{value:15},{value:4},{value:2},{value:.8}]),g=new a.default([{range:[0,7]}]),x=new u.rN(()=>{console.log("loop1");let e=h.next(),t=n.player(e);t.start(u.zO()),x.interval=t.buffer.duration,console.log("volumeAudio1 "+n.volume.value)}),P=new u.rN(()=>{console.log("loop2");let e=y.next(),t=i.player(e);t.start(u.zO()),P.interval=t.buffer.duration,console.log("volumeAudio2 "+i.volume.value)}),k=new c.RandomMetro(()=>{if(console.log("timeSelector"),1!=w.next())return console.log(g),l.current.play(),l.current.style.visibility="visible",o.current.style.visibility="hidden",n.volume.rampTo(-80,.05),i.volume.rampTo(0,.05),{interval:(0,c.sToMs)(T.next())};{let e=(0,c.sToMs)(g.next());return o.current.currentTime=e,console.log(e),n.volume.rampTo(0,.05),i.volume.rampTo(-80,.05),o.current.style.visibility="visible",l.current.style.visibility="hidden",{interval:(0,c.sToMs)(T.next())}}}),A=async e=>{await Promise.all([u.BL(),p,f]),n.volume.rampTo(0,.05),i.volume.rampTo(0,.05),u.J7.start(),e.current.currentTime=0,e.current.play(),l.current.currentTime=0,l.current.play(),x.start(),P.start(),k.start()},N=async()=>{var e,t,r,a;n.volume.rampTo(-80,s.c),i.volume.rampTo(-80,s.c),null==o||null===(e=o.current)||void 0===e||null===(t=e.pause)||void 0===t||t.call(e),null==l||null===(r=l.current)||void 0===r||null===(a=r.pause)||void 0===a||a.call(r),[l].forEach(e=>{e.current&&(e.current.pause(),e.current.currentTime=0)}),k.stop(),x.stop(),P.stop(),await (0,d.ZP)((0,c.sToMs)(s.c)),n.stopAll(),i.stopAll()}},6124:function(e,t,r){r.r(t),r.d(t,{weightedRandom:function(){return i}});var n=r(7038);let i=e=>{let t;let r=[...e];for(t=1;t<r.length;t++)r[t]+=r[t-1];let n=Math.random()*r[r.length-1];for(t=0;t<r.length&&!(r[t]>n);t++);return t},o=e=>{let{restProbability:t,followedBy:r}=e;return"number"==typeof e||"string"==typeof e?{value:e,type:"value"}:{...e,type:["value","range"].find(t=>void 0!==e[t]),restProbability:t>1?t/100:t,followedBy:r?u(r):void 0}},l=e=>Object.entries(e).map(e=>{let[t,r]=e;return{...o(r),name:t}}),a=e=>e.map((e,t,r)=>{let{length:n}=r;return{name:t,probability:1/n,...o(e)}}),u=e=>(Array.isArray(e)?a:l)(e),s=e=>e.reduce((e,t,r)=>(e[t.name]={...t,index:r},e),{}),c=e=>e.map(e=>e.probability);t.default=class{initCounter(){let{repeat:e}=this.instructions[this.current];this.count=0,this.max=Array.isArray(e)?(0,n.randomInt)(...e):e||0,this.finished=!1}next(){var e;let t=(null===(e=this.instructions)||void 0===e?void 0:e[this.current])||{};if(t.repeat&&!this.finished)this.finished=this.max<=++this.count;else if(t.followedBy&&(t.repeat&&this.finished||!t.repeat)){let{value:r}=t.followedBy[i(c(t.followedBy))];this.current="number"==typeof r?r:this.byName[r].index,this.initCounter()}else this.current=i(this.probabilities),this.initCounter();let o=this.instructions[this.current],{type:l,restProbability:a}=o,u=a&&!i([a,1-a]),s=u?null:"range"==l?(0,n.randomInt)(...o[l]):"value"==l?o[l]:null;return s}constructor(e){this.instructions=u(e),this.probabilities=c(this.instructions),this.byName=s(this.instructions),this.count=this.max=0,this.finished=!1}}},1343:function(e,t,r){let n=()=>{let e=Error("Delay aborted");return e.name="AbortError",e},i=new WeakMap,o=function({clearTimeout:e,setTimeout:t}={}){return(r,{value:o,signal:l}={})=>{let a,u,s;if(l?.aborted)return Promise.reject(n());let c=e??clearTimeout,d=()=>{c(a),s(n())},m=()=>{l&&l.removeEventListener("abort",d)},v=new Promise((e,n)=>{u=()=>{m(),e(o)},s=n,a=(t??setTimeout)(u,r)});return l&&l.addEventListener("abort",d,{once:!0}),i.set(v,()=>{c(a),a=null,u()}),v}}();t.ZP=o}}]);